# MCP Server - AI Agent Workflow (n8n)

This is an n8n workflow designed to serve as an **MCP Server Trigger Agent**, enabling automated interaction with Gmail, Google Calendar, and Google Sheets using natural language commands interpreted by a connected AI model via the MCP protocol.

---

## 🔧 Components

### 1. **MCP Server Trigger**
Receives tool call requests from LLMs using the MCP (Model Context Protocol). Acts as the entry point for all AI-initiated tasks.

### 2. **Google Calendar Nodes**
- **Create Event** – Schedules a new calendar event.
- **Find Single Event** – Retrieves a specific event using an event ID.
- **Find Multiple Events** – Fetches a list of upcoming events.
- **Update Event** – Modifies an existing event based on Event ID.

### 3. **Gmail Nodes**
- **Find Emails** – Retrieves filtered emails from Gmail.
- **Draft Email** – Composes a draft email using subject and body generated by the AI.

### 4. **Google Sheets Nodes**
- **Add New Row** – Appends new contact information to a spreadsheet.
- **Find Row** – Searches the spreadsheet for specific entries.
- **Update Row** – Updates existing contact information using row number as the key.

---

## 🧠 Example Prompts

Here are some examples of natural language prompts this agent can handle:

- “Find my next 3 meetings with John.”
- “Send an email to Rick apologizing for the delay and propose a new time tomorrow at 9 AM.”
- “Add a new contact: Jane Doe, phone +1 234 567 8901.”
- “Update Jon’s company to B Corp and his email to jon@bcorp.com.”
- “Draft a reminder email for all meetings today.”

---

## 📁 Credentials Required

Make sure the following OAuth2 credentials are configured in your n8n instance:

- **Google Calendar** – `googleCalendarOAuth2Api`
- **Gmail** – `gmailOAuth2`
- **Google Sheets** – `googleSheetsOAuth2Api`

Each of these should be authorized with access to the appropriate accounts (`hello@1node.ai`, etc.).

---

## 🔄 Workflow Flow

1. LLM sends an MCP tool call.
2. `MCP Server Trigger` receives the call.
3. The appropriate node (e.g., Gmail, Calendar, Sheets) is selected based on the tool name.
4. The node performs the action and returns output back to the LLM client via MCP.

---

## 📌 Notes

- This agent is best used with LangChain, LLaMA, Claude, or GPT-based LLMs capable of issuing tool calls.
- Sticky Notes in the workflow provide example prompts and usage notes.
- Make sure the MCP Client that communicates with this server is properly configured with the correct path (`bc0de726-9312-42d0-8356-59a059994ded`).

---

## 🔗 Deployment

- Recommended: Run n8n via Docker with a public URL using services like [ngrok](https://ngrok.com/) or self-hosted reverse proxy (for production).
- Ensure that webhook URLs are accessible by the LLM’s tool-calling system.

---

## 💡 Customization

You can expand this workflow with additional integrations (e.g., Slack, Notion, Discord) or condition-based logic using `IF` and `Switch` nodes.

---

## 📜 License

This template is open for personal and commercial use. Attribution is appreciated but not required.
